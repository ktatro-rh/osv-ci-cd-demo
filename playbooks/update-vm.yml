---
- name: Update the VM
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    # VM details
    vm_name: test-vm
    vm_project: default
    deployment_version: 1.0.0

  tasks:
    - name: update vm 
      kubernetes.core.k8s:
        definition: "{{ lookup('template', '../openshift-resources/vm.yml') | from_yaml }}"
        state: present 